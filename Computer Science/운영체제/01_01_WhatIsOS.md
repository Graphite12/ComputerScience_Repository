# 프로그램
- 실행가능한 명령어들의 집합, **프로세스**(Process)라고도함.
# 운영체제의 구조
![[Pasted image 20231201144032.png]]
- **사용자 인터페이스(User Interface)**
  - **CLI (Command Line Interface)**
	- `sh`, `bash`, `csh`, `zsh`, `tcsh` 등 존재.
  - **GUI (Graphic User Interface)**
	- `Windows`, `Linux`, `Mac OS` 등..
  - **Touch Screen Interface**
	- `Android`, `Ios` 등 
- **프로그램의 실행(Program execution)**
	- 시스템은 프로그램을 메모리에 적재해 실행 가능.
	- 정상 혹은 비정상적으로 끝낼 수 있어야함.
- **입/출력 연산(I/O operation)**
	- 사용자가 I/O를 수행하기 위한 API 제공. 
	- 예: 네트워크 인터페이스로 데이터읽기, 파일 관리 시스템을 통해 쓰기
- **파일 시스템 조작(File-system manipulation)**
	- 프로그램이 파일 혹은 디렉토리를 읽기, 쓰기, 생성, 삭제, 검색 등 기능 활용.
	- 파일 소유권에 따른 권한 관리(접근 허용 및 거부)
- **에러 탐색(Error detection)**
	- 지속적인 오류 감지 및 수정
	- CPU, 메모리, I/O 장치, 프로그램에서 발생가능
	- 올바르고 일관된 컴퓨팅 보장.
	- 시스템을 중단, 오류발생 프로세스 종료 및 오류코드 반환 
- **자원 할당(Resource allocation)**
	- 여러 프로세스가 동시에 실행 중일때 각 프로세스별로 적절하게 자원할당.
	- 메모리, 파일 저장소, CPU 주기 등 리소스 관리
	- 프린터, USB 등 기타 주변 장치 할당
- **로깅(logging)**
	- 컴퓨터의 리소스 사용량 추적
	- 사용 통계 수집
	- 시스템 관리자가 시스템 최적화 
- **보호 및 보안(Protection and Security)**
	- **보호:** 동시에 실행된 각 프로세스 끼리 간섭 방지 
	- **보안:** 시스템 보호를 위한 사용자 인증, I/O 장치 보호 및 침입 감지

 
## 시스템 호출(System Call)

- 시스템 호출은 운영체제에서 제공하는 인터페이스이다.
- 사용자 레벨의 프로그램이 운영체제의 커널에 서비스 요청할때 쓰임.
- 파일 관리, 프로세스 제어, 메모리 관리, 네트워크 관, 시스템 정보 접근 등을 제공.

### 시스템 호출의 유형
1. **프로세서 제어**
```cpp
#include <cstdlib> // Windows, Linux, Mac OS 지원
#include <Windows.h> // Windows에서만 사용가능
#include <iostream>
using std::cout, std::cerr, std::endl;

int main() {
	/* 프로세스의 생성 */
	int status = system("ls -a");
	
	if(status == -1) {
		cerr << "프로세스 생성에 실패했습니다." << endl;
		exit(1); // 에러, 종료상태 1
	}

	cout << "프로세스가 성공적으로 실행되었습니다." << endl;
	cout << "프로그램을 종료합니다." << endl;
	/* 프로세스의 종료 */
	exit(0);
}
```
2. **파일 조작**

```cpp
#include <cstdio>

int main () {

	/* 파일 열기/ 닫기 */
	FILE* file = fopen("path/to/hello.txt", "r");
	fclose(file);
	
	/* 파일 읽기 */
	fread();
	fwrite();
	
	return 0;
}

```



## 인터럽트란?, interupt 

- 끼어듦, 가로막기라는 뜻
- 예외상황 발생 시 CPU에서 현재 작업을 일시 중단하고, 특정 이벤트를 수행 후 원래 작업을 수행하는 매커니즘.

#### 하드웨어 인터럽트
- **사용자 입력**: 키보드, 조이스틱 등
- **디스크 드라이브 I/O**
	+ USB, 외장 SSD등 Data 시작과 종료를 알리는 경우
#### 소프트웨어 인터럽트
- 시스템 호출 사용.
- 프로그램 오류.

### 기본 인터럽트 매커니즘

1. 외부장치가 I/O 시작
2. (인터럽트 컨트롤러)인터럽트 신호 생성
3. CPU로 인터럽트 전달 
4. CPU는 현재 실행중인 작업중단
5. 인터럽트 핸들러로 요청
6. 데이터 처리 후 CPU로 정보전달
7. CPU 작업 재개


> **장치 드라이버란?**
>   
> 운영체제와 하드웨어 장치 간 통신을 담당하는 소프트웨어.
> ex. 키보드, 마우스, 프린터 와 같은 컴퓨터와 연결된 외부 장치.

# 멀티프로그래밍과 멀티태스킹

-  **멀티프로그래밍이란(Multi Programming)?**
	- 멀티 프로그래밍에서 실행되는 프로그램은 **프로세스**.
	- 여러 프로세스를 메모리에 올려두고 유지.
	- 하나의 프로세스가 대기상태면, 다른 프로세스로 전환
	- CPU가 효율적으로 작업을 수행함.
	
- **멀티프로그래밍 이전**
	- 하나의 프로세스를 메모리에 올려두고 유지.
	- 현재 프로세스의 I/O 작업 중 CPU는 **유휴상태(Idle)** 유지
	- CPU 작업 효율성이 떨어짐.

- **멀티태스킹(Multi Tasking)**
	- `Task`: O/S에서 처리하는 작업의 단위.(process보다 상위개념)
	- 여러 Task를 **CPU스케줄링**에 의해 번갈아가며 수행.



